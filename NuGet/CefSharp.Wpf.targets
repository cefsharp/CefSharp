<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <CefSharpTargetDir Condition=" '$(CefSharpTargetDir)' == '' "></CefSharpTargetDir>
  </PropertyGroup>

  <!--
    These item groups should be in the .props file, unfortunately Nuget 2.8.x doesn't gurantee the
    correct ordering .props imports, which we require as this depends on the cef.redist packages
    exporting an ItemGroup
   -->

  <!-- Copying all files here included those at are added As References so you can specify CefSharpTargetDir -->
  <Choose>
    <When Condition="'$(Platform)' == 'AnyCPU'">
      <ItemGroup>
        <ContentWithTargetPath Include="@(CefSharpWpfBinaries32)">
          <TargetPath>$(CefSharpTargetDir)\x86\%(RecursiveDir)%(FileName)%(Extension)</TargetPath>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </ContentWithTargetPath>
        <ContentWithTargetPath Include="@(CefSharpWpfBinaries64)">
          <TargetPath>$(CefSharpTargetDir)\x64\%(RecursiveDir)%(FileName)%(Extension)</TargetPath>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </ContentWithTargetPath>
      </ItemGroup>
    </When>
    <When Condition="'$(Platform)' == 'x64'">
      <ItemGroup>
        <ContentWithTargetPath Include="@(CefSharpWpfBinaries64)">
          <TargetPath>$(CefSharpTargetDir)\%(RecursiveDir)%(FileName)%(Extension)</TargetPath>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </ContentWithTargetPath>
      </ItemGroup>
    </When>    
    <!-- x86, and Win32 -->
    <Otherwise>
      <ItemGroup>
        <ContentWithTargetPath Include="@(CefSharpWpfBinaries32)">
          <TargetPath>$(CefSharpTargetDir)\%(RecursiveDir)%(FileName)%(Extension)</TargetPath>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </ContentWithTargetPath>
      </ItemGroup>
    </Otherwise>
  </Choose>
</Project>
